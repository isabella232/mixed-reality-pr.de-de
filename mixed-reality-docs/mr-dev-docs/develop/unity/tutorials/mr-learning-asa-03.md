---
title: 'Tutorials zu Azure Spatial Anchors: 3 Speichern, Abrufen und Freigeben von Azure Spatial Anchors'
description: In diesem Kurs erfahren Sie, wie Sie Azure Spatial Anchors in einer Mixed Reality-Anwendung speichern, abrufen und teilen.
author: jessemcculloch
ms.author: jemccull
ms.date: 07/01/2020
ms.topic: article
keywords: Mixed Reality, Unity, Tutorial, HoloLens, MRTK, Mixed Reality Toolkit, UWP, Azure Spatial Anchors, App-Sitzungen
ms.localizationpriority: high
ms.openlocfilehash: c085aecef1ce32565d2f3bbbf1d5fdb2da91c217
ms.sourcegitcommit: dd13a32a5bb90bd53eeeea8214cd5384d7b9ef76
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/17/2020
ms.locfileid: "94679409"
---
# <a name="3-saving-retrieving-and-sharing-azure-spatial-anchors"></a><span data-ttu-id="77833-105">3. Speichern, Abrufen und Freigeben von Azure Spatial Anchors</span><span class="sxs-lookup"><span data-stu-id="77833-105">3. Saving, retrieving, and sharing Azure Spatial Anchors</span></span>

<span data-ttu-id="77833-106">In diesem Tutorial erfahren Sie, wie Sie Azure Spatial Anchors über mehrere App-Sitzungen hinweg speichern, indem Sie die Anker-ID im Speicher von HoloLens 2 speichern.</span><span class="sxs-lookup"><span data-stu-id="77833-106">In this tutorial, you will learn how to save Azure Spatial Anchors across multiple app sessions by saving the anchor ID to the HoloLens 2's storage.</span></span> <span data-ttu-id="77833-107">Darüber hinaus erfahren Sie, wie Sie diese Anker-ID für für andere Geräte freigeben, um eine Ankerausrichtung auf mehreren Geräten zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="77833-107">You will also learn how to share this anchor ID to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="77833-108">Ziele</span><span class="sxs-lookup"><span data-stu-id="77833-108">Objectives</span></span>

* <span data-ttu-id="77833-109">Erfahren, wie die räumliche Ausrichtung über mehrere App-Sitzungen erreicht wird</span><span class="sxs-lookup"><span data-stu-id="77833-109">Learn how to achieve spatial alignment across multiple app sessions.</span></span>
* <span data-ttu-id="77833-110">Erfahren, wie räumliche Ausrichtung zwischen mehreren Geräten erreicht werden kann</span><span class="sxs-lookup"><span data-stu-id="77833-110">Learn how to achieve spatial alignment between multiple devices.</span></span>

## <a name="preparing-the-scene"></a><span data-ttu-id="77833-111">Vorbereiten der Szene</span><span class="sxs-lookup"><span data-stu-id="77833-111">Preparing the scene</span></span>

<span data-ttu-id="77833-112">Klappen Sie im Hierarchiefenster das **ButtonParent**-Objekt auf.</span><span class="sxs-lookup"><span data-stu-id="77833-112">In the Hierarchy window, expand the **ButtonParent** object.</span></span> <span data-ttu-id="77833-113">Wählen Sie die **vier letzten untergeordneten Schaltflächenobjekte** aus.</span><span class="sxs-lookup"><span data-stu-id="77833-113">Select the **last four child button** objects.</span></span> <span data-ttu-id="77833-114">**Aktivieren** Sie im Inspektorfenster das Kontrollkästchen neben dem Namensfeld, um alle diese Objekte als aktiv festzulegen.</span><span class="sxs-lookup"><span data-stu-id="77833-114">In the Inspector window, **check** the checkbox next to the name field to make all the objects active.</span></span>

![Unity mit zuvor inaktiven Schaltflächenobjekten, die ausgewählt und aktiviert sind](images/mr-learning-asa/asa-03-section1-step1-1.png)

<span data-ttu-id="77833-116">Wählen Sie im Hierarchiefenster die **ButtonParent**-Objekte aus.</span><span class="sxs-lookup"><span data-stu-id="77833-116">In the Hierarchy window, select the **ButtonParent** objects.</span></span> <span data-ttu-id="77833-117">Suchen Sie dann im Inspektorfenster die **GridObjectCollection**-Komponente, und klicken Sie auf die Schaltfläche **Update Collection** (Sammlung aktualisieren), um die Position aller untergeordneten Objekte des **ButtonParent**-Objekts zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="77833-117">Then in the Inspector window, locate the **GridObjectCollection** component and click the **Update Collection** button to update the position of all the **ButtonParent** object's child objects.</span></span>

![Unity mit aktualisierter GridObjectCollection-Komponente](images/mr-learning-asa/asa-03-section1-step1-2.png)

## <a name="persisting-azure-spatial-anchors-between-app-sessions"></a><span data-ttu-id="77833-119">Beibehalten von Azure Spatial Anchors über App-Sitzungen hinweg</span><span class="sxs-lookup"><span data-stu-id="77833-119">Persisting Azure Spatial Anchors between app sessions</span></span>

<span data-ttu-id="77833-120">In diesem Abschnitt erfahren Sie, wie Sie die Azure Anchor ID auf der lokalen Festplatte der HoloLens speichern und abrufen.</span><span class="sxs-lookup"><span data-stu-id="77833-120">In this section, you will learn how to save and retrieve the Azure Anchor ID to and from the HoloLens' local disk.</span></span> <span data-ttu-id="77833-121">Auf diese Weise können Sie in verschiedenen App-Sitzungen die gleiche Anchor-ID bei Azure abrufen.</span><span class="sxs-lookup"><span data-stu-id="77833-121">This will allow you to query Azure for the same anchor ID between different app sessions.</span></span> <span data-ttu-id="77833-122">Das ermöglicht es, verankerte Hologramme an den gleichen Orten zu positionieren wie in der vorangegangenen App-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="77833-122">It will enable the anchored holograms to be positioned at the same location as in the previous app session.</span></span>

<span data-ttu-id="77833-123">Klappen Sie im Hierarchiefenster das **ButtonParent**-Objekt auf, und suchen Sie die zwei Schaltflächen mit den Namen **SaveAzureAnchorIdToDisk** und **GetAzureAnchorIdFromDisk**:</span><span class="sxs-lookup"><span data-stu-id="77833-123">In the Hierarchy window, expand the **ButtonParent** object and locate the two buttons named **SaveAzureAnchorIdToDisk** and **GetAzureAnchorIdFromDisk**:</span></span>

![Unity mit ausgewählten SaveAzureAnchorIdToDisk- und GetAzureAnchorIdFromDisk-Schaltflächenobjekten](images/mr-learning-asa/asa-03-section2-step1-1.png)

<span data-ttu-id="77833-125">Führen Sie die gleichen Schritte wie in den Anleitungen zum [Konfigurieren der Schaltflächen zum Betreiben der Szene](mr-learning-asa-02.md#configuring-the-buttons-to-operate-the-scene) aus dem vorhergehenden Tutorial aus, um die Komponente **Interactable (Script)** für jede der zwei Schaltflächen zu konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="77833-125">Follow the same steps as in the [configuring the buttons to operate the scene](mr-learning-asa-02.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="77833-126">Weisen Sie für das **SaveAzureAnchorIdToDisk**-Schaltflächenobjekt die AnchorModuleScript-> **SaveAzureAnchorIdToDisk ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="77833-126">For the **SaveAzureAnchorIdToDisk** button object, assign the AnchorModuleScript > **SaveAzureAnchorIdToDisk ()** function.</span></span>
* <span data-ttu-id="77833-127">Weisen Sie für das **GetAzureAnchorIdFromDisk**-Schaltflächenobjekt die AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="77833-127">For the **GetAzureAnchorIdFromDisk** button object, assign the AnchorModuleScript > **GetAzureAnchorIdFromDisk ()** function.</span></span>

<span data-ttu-id="77833-128">Wenn Sie die aktualisierte App für Ihre HoloLens erstellen, können Sie jetzt Azure Spatial Anchors zwischen App-Sitzungen beibehalten, indem Sie die Azure Anchor ID speichern.</span><span class="sxs-lookup"><span data-stu-id="77833-128">If you build the updated app to your HoloLens, you can now persist Azure Spatial Anchors between app sessions by saving the Azure Anchor ID.</span></span> <span data-ttu-id="77833-129">Um das zu Testen, können Sie diese Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="77833-129">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="77833-130">Bewegen des Rover Explorers an die gewünschte Position</span><span class="sxs-lookup"><span data-stu-id="77833-130">Move the Rover Explorer to the desired location</span></span>
2. <span data-ttu-id="77833-131">Starten einer Azure-Sitzung</span><span class="sxs-lookup"><span data-stu-id="77833-131">Start Azure Session</span></span>
3. <span data-ttu-id="77833-132">Erstellen von Azure Anchors (erstellt Anker an der Position des Rover Explorers)</span><span class="sxs-lookup"><span data-stu-id="77833-132">Create Azure Anchor (creates anchors at the location of the Rover Explorer)</span></span>
4. <span data-ttu-id="77833-133">Speichern der Azure Anchor-ID auf dem Datenträger</span><span class="sxs-lookup"><span data-stu-id="77833-133">Save Azure Anchor ID to Disk</span></span>
5. <span data-ttu-id="77833-134">Erneutes Starten der App</span><span class="sxs-lookup"><span data-stu-id="77833-134">Restart the app</span></span>
6. <span data-ttu-id="77833-135">Abrufen des Azure Anchors vom Datenträger (lädt die Anker-ID, die Sie gerade erst gespeichert haben)</span><span class="sxs-lookup"><span data-stu-id="77833-135">Get Azure Anchor from Disk (loads the anchor ID you just saved)</span></span>
7. <span data-ttu-id="77833-136">Starten einer Azure-Sitzung</span><span class="sxs-lookup"><span data-stu-id="77833-136">Start Azure Session</span></span>
8. <span data-ttu-id="77833-137">Suchen eines Azure Anchors (platziert den Rover Explorer an der Position aus Schritt 3)</span><span class="sxs-lookup"><span data-stu-id="77833-137">Find Azure Anchor (positions the Rover Explorer at the location from step 3)</span></span>

> [!NOTE]
> <span data-ttu-id="77833-138">Für einen vollständigen Neustart der App muss nach dem Schließen der immersiven App-Ansicht das App-Fenster in der Mixed Reality Startumgebung geschlossen werden, bevor die App über das Startmenü neu gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="77833-138">To fully restart the app, after exiting the immersive app view, the app window in the mixed reality home needs to be closed before relaunching it from the Start menu.</span></span> <span data-ttu-id="77833-139">Weitere Details finden Sie in der Dokumentation [Verwenden von Apps in HoloLens](https://docs.microsoft.com/hololens/holographic-home#using-apps-on-hololens).</span><span class="sxs-lookup"><span data-stu-id="77833-139">For additional details, you can refer to the [Using apps on HoloLens](https://docs.microsoft.com/hololens/holographic-home#using-apps-on-hololens) documentation.</span></span>

## <a name="sharing-azure-spatial-anchors-between-devices"></a><span data-ttu-id="77833-140">Teilen von Azure Spatial Anchors zwischen Geräten</span><span class="sxs-lookup"><span data-stu-id="77833-140">Sharing Azure Spatial Anchors between devices</span></span>

<span data-ttu-id="77833-141">In diesem Abschnitt erfahren Sie, wie Sie die Azure Anchor ID gemeinsam auf mehreren Geräten verwenden.</span><span class="sxs-lookup"><span data-stu-id="77833-141">In this section, you will learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="77833-142">Dies ermöglicht es mehreren Geräten, die gleiche Anchor ID bei Azure abzufragen, was die räumliche Ausrichtung der verankerten Hologramme gestattet.</span><span class="sxs-lookup"><span data-stu-id="77833-142">This will allow multiple devices to query Azure for the same anchor ID, allowing the anchored holograms to be spatially aligned.</span></span> <span data-ttu-id="77833-143">Die räumliche Ausrichtung, d. h. die Anzeige der gleichen Hologramme an den gleichen physischen Positionen auf mehreren Geräten, ist entscheidend für gemeinsame lokale Benutzererlebnisse in HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="77833-143">Spatial alignment, i.e., seeing the same holograms in the same physical location between multiple devices, is key to local shared experiences in the HoloLens 2.</span></span>

<span data-ttu-id="77833-144">Es gibt viele Möglichkeiten, Azure Anchor IDs zwischen Geräten zu übertragen, einschließlich der Methoden, die in der Reihe der [Tutorials zu Mehrbenutzerfunktionen](mr-learning-sharing-02.md) beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="77833-144">There are many ways to transfer Azure Anchor IDs between devices, including methods outlined in the [Multi-user capabilities tutorials](mr-learning-sharing-02.md) series.</span></span> <span data-ttu-id="77833-145">In diesem Beispiel verwenden Sie einen einfachen Webdienst zum Hochladen und Herunterladen von Anchor IDs zwischen Geräten.</span><span class="sxs-lookup"><span data-stu-id="77833-145">In this example, you will use a simple web service to upload and download anchor IDs between devices.</span></span>

<span data-ttu-id="77833-146">Klappen Sie im Hierarchiefenster das **ButtonParent**-Objekt auf.</span><span class="sxs-lookup"><span data-stu-id="77833-146">In the Hierarchy window, expand the **ButtonParent** object.</span></span>   <span data-ttu-id="77833-147">Suchen Sie die zwei Schaltflächen **ShareAzureAnchorIdToNetwork** und **GetAzureAnchorIdFromNetwork**:</span><span class="sxs-lookup"><span data-stu-id="77833-147">Locate the two buttons named **ShareAzureAnchorIdToNetwork** and **GetAzureAnchorIdFromNetwork**:</span></span>

![Unity mit ausgewählten ShareAzureAnchorIdToNetwork- und GetAzureAnchorIdFromNetwork-Schaltflächenobjekten](images/mr-learning-asa/asa-03-section3-step1-1.png)

<span data-ttu-id="77833-149">Führen Sie die gleichen Schritte wie in den Anleitungen zum [Konfigurieren der Schaltflächen zum Betreiben der Szene](mr-learning-asa-02.md#configuring-the-buttons-to-operate-the-scene) aus dem vorhergehenden Tutorial aus, um die Komponente **Interactable (Script)** für jede der zwei Schaltflächen zu konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="77833-149">Follow the same steps as in the [configuring the buttons to operate the scene](mr-learning-asa-02.md#configuring-the-buttons-to-operate-the-scene) instructions from the previous tutorial to configure the **Interactable (Script)** component on each of the two buttons:</span></span>

* <span data-ttu-id="77833-150">Weisen Sie dem **ShareAzureAnchorIdToNetwork** Objekt die AnchorModuleScript-> **ShareAzureAnchorIdToNetwork ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="77833-150">For the **ShareAzureAnchorIdToNetwork** object, assign the AnchorModuleScript > **ShareAzureAnchorIdToNetwork ()** function.</span></span>
* <span data-ttu-id="77833-151">Weisen Sie dem **GetAzureAnchorIdFromNetwork**-Objekt die AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** -Funktion zu.</span><span class="sxs-lookup"><span data-stu-id="77833-151">For the **GetAzureAnchorIdFromNetwork** object, assign the AnchorModuleScript > **GetAzureAnchorIdFromNetwork ()** function.</span></span>

<span data-ttu-id="77833-152">Wenn Sie die aktualisierte App auf zwei HoloLens-Geräten erstellen, können Sie jetzt eine räumliche Ausrichtung erzielen, indem Sie die Azure Anchor ID freigeben.</span><span class="sxs-lookup"><span data-stu-id="77833-152">If you build the updated app to two HoloLens devices, you can now achieve spatial alignment by sharing the Azure Anchor ID.</span></span> <span data-ttu-id="77833-153">Um das zu Testen, können Sie diese Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="77833-153">To test it out, you can follow these steps:</span></span>

1. <span data-ttu-id="77833-154">Auf HoloLens-Gerät 1: Bewegen Sie den Rover Explorer an die gewünschte Position.</span><span class="sxs-lookup"><span data-stu-id="77833-154">On HoloLens device 1: Move the Rover Explorer to the desired location.</span></span>
2. <span data-ttu-id="77833-155">Auf HoloLens-Gerät 1: Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="77833-155">On HoloLens device 1: Start Azure Session.</span></span>
3. <span data-ttu-id="77833-156">Auf HoloLens-Gerät 1: Erstellen Sie einen Azure Anchor (erstellt Anker an der Position des Rover Explorers).</span><span class="sxs-lookup"><span data-stu-id="77833-156">On HoloLens device 1: Create Azure Anchor (creates anchors at the location of the Rover Explorer).</span></span>
4. <span data-ttu-id="77833-157">Auf HoloLens-Gerät 1: Geben Sie die Azure Anchor ID im Netzwerk frei.</span><span class="sxs-lookup"><span data-stu-id="77833-157">On HoloLens device 1: Share Azure Anchor ID to Network.</span></span>
5. <span data-ttu-id="77833-158">Auf HoloLens-Gerät 2: Starten Sie die App.</span><span class="sxs-lookup"><span data-stu-id="77833-158">On HoloLens device 2: Start the app.</span></span>
6. <span data-ttu-id="77833-159">Auf HoloLens-Gerät 2: Rufen Sie die Shared Anchor ID aus dem Netzwerk ab (ruft die Anchor ID ab, die gerade von HoloLens-Gerät 1 freigegeben worden war).</span><span class="sxs-lookup"><span data-stu-id="77833-159">On HoloLens device 2: Get Shared Anchor ID from Network (fetches the anchor ID just shared from HoloLens device 1).</span></span>
7. <span data-ttu-id="77833-160">Auf HoloLens-Gerät 2: Starten Sie eine Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="77833-160">On HoloLens device 2: Start Azure Session.</span></span>
8. <span data-ttu-id="77833-161">Auf HoloLens-Gerät 2: Suchen Sie den Azure Anchor (positioniert den Rover Explorer am Ort aus Schritt 3).</span><span class="sxs-lookup"><span data-stu-id="77833-161">On HoloLens device 2: Find Azure Anchor (positions the Rover Explorer at the location from step 3).</span></span>

> [!TIP]
> <span data-ttu-id="77833-162">Wenn Sie nur über ein HoloLens-Gerät verfügen, können Sie die Funktionalität trotzdem testen, indem Sie die App neu starten, statt ein zweites HoloLens-Gerät zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="77833-162">If you only have one HoloLens, you can still test the functionality by restarting the app instead of using a second HoloLens device.</span></span>

## <a name="congratulations"></a><span data-ttu-id="77833-163">Herzlichen Glückwunsch!</span><span class="sxs-lookup"><span data-stu-id="77833-163">Congratulations</span></span>

<span data-ttu-id="77833-164">In diesem Tutorial haben Sie erfahren, wie Sie Azure Spatial Anchors zwischen App-Sitzungen und über App-Neustarts hinweg beibehalten, indem Sie die Azure Spatial Anchor ID auf dem lokalen Datenträger auf HoloLens speichern.</span><span class="sxs-lookup"><span data-stu-id="77833-164">In this tutorial, you learned how to persist Azure Spatial Anchors between app sessions and app restarts by saving the Azure Spatial Anchor ID to the local disk on HoloLens.</span></span> <span data-ttu-id="77833-165">Sie haben darüber hinaus gelernt, wie Azure Spatial Anchors zwischen mehreren Geräten geteilt werden, um eine einfache geteilte Mehrbenutzererfahrung mit statischen Hologrammen zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="77833-165">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience.</span></span>

<span data-ttu-id="77833-166">Im nächsten Tutorial erfahren Sie, wie Sie für Benutzer Feedback in Echtzeit bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="77833-166">In the next tutorial, you will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="77833-167">Dieses Feedback enthält Informationen zur Ankererstellung, zur Qualität des Verstehens der Umgebung und zum Status der Azure-Sitzung.</span><span class="sxs-lookup"><span data-stu-id="77833-167">This feedback will include information about Anchor creation, the quality of environment understanding, and the Azure session's state.</span></span> <span data-ttu-id="77833-168">Ohne Feedback wissen Benutzer möglicherweise nicht, ob ein Anker erfolgreich zu Azure hochgeladen wurde, ob die Qualität der Umgebung für die Ankererstellung ausreicht und wie der aktuelle Zustand ist.</span><span class="sxs-lookup"><span data-stu-id="77833-168">Without feedback, users may not know whether an anchor has successfully been uploaded to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="77833-169">Nächstes Tutorial: 4. Anzeigen von Azure Spatial Anchors-Feedback</span><span class="sxs-lookup"><span data-stu-id="77833-169">Next Tutorial: 4. Displaying Azure Spatial Anchor feedback</span></span>](mr-learning-asa-04.md)
